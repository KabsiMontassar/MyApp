<p>task-detail works!</p>
<div class="task-detail" *ngIf="task">
  <mat-form-field appearance="fill" class="w-full mb-3">
  <mat-label>Titre</mat-label>
  <input
    matInput
    [(ngModel)]="newSubTask.titre"
    name="titre"
    required
    #titreInput="ngModel"
    placeholder="Entrez le titre"
  />
  <mat-error *ngIf="titreInput.invalid && titreInput.touched">
    Le titre est requis.
  </mat-error>
  </mat-form-field>
  
  <mat-form-field appearance="fill" class="w-full mb-3">
  <mat-label>Description</mat-label>
    <textarea
      matInput
      [(ngModel)]="newSubTask.description"
      name="description"
      rows="3"
      placeholder="Entrez la description"></textarea>
  </mat-form-field>

    
  <div class="task-dates">
    <p><strong>Date de début :</strong> {{ task.dateDebut | date }}</p>
    <p><strong>Date de fin :</strong> {{ task.dateFin | date }}</p>
    <p><strong>Statut :</strong> {{ task.statutTache | statusDisplay }}</p>
  </div>
    
    <div class="subtasks-section" *ngIf="task.sousTaches && task.sousTaches.length > 0">
      <h3>Subtasks ({{ task.sousTaches.length }})</h3>
      <mat-list>
        <mat-list-item *ngFor="let subTask of task.sousTaches">
          {{ subTask.titre }} - {{ subTask.statutTache }}
        </mat-list-item>
      </mat-list>
    </div>
    
    <button
      mat-stroked-button 
      color="primary"
      (click)="showSubTaskForm = true"
      *ngIf="!showSubTaskForm"
    >
      Ajouter une sous-tâche
    </button>
    
    <div class="subtask-form" *ngIf="showSubTaskForm">
      <h4>Nouvelle sous-tâche</h4>
      <mat-form-field appearance="fill" class="w-full mb-3">
        <mat-label>Titre</mat-label>
        <input
          matInput
          [(ngModel)]="newSubTask.titre"
          name="titre"
          required
          #titreInput="ngModel"
          placeholder="Entrez le titre"
        />
        <mat-error *ngIf="titreInput.invalid && titreInput.touched">
          Le titre est requis.
        </mat-error>
      </mat-form-field>
      <mat-form-field appearance="fill" class="w-full mb-3">
        <mat-label>Description</mat-label>
        <textarea
          matInput
          [(ngModel)]="newSubTask.description"
          name="description"
          rows="3"
          placeholder="Entrez la description"
        ></textarea>
      </mat-form-field>
      <div class="form-actions">
        <button 
          mat-flat-button 
          color="primary" 
          (click)="addSubTask()" 
          [disabled]="titreInput.invalid"
        >
          Ajouter
        </button>
        <button mat-button (click)="showSubTaskForm = false">Annuler</button>

      </div>
    </div>
  </div>
